<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:h="clr-namespace:ClassDesigner.Helping">
    <ControlTemplate x:Key="PropertiesPanel" TargetType="ContentControl">
        <ContentControl x:Name="PropertiesPanel" Content="{TemplateBinding Content}">
            <ContentControl.ContentTemplateSelector>
                <h:PropertiesTemplateSelector>

                    <h:PropertiesTemplateSelector.DefaultTemplate>
                        <DataTemplate>

                        </DataTemplate>
                    </h:PropertiesTemplateSelector.DefaultTemplate>

                    <h:PropertiesTemplateSelector.ClassTemplate>
                        <DataTemplate>
                            <StackPanel DataContext="{Binding Source={x:Reference Name=PropertiesPanel}, Path=Content}">
                                <TextBlock Text="Имя"/>
                                <TextBox Text="{Binding Header}"/>
                                <Separator/>
                                <TextBlock Text="Видимость"/>
                                <ComboBox ItemsSource="{Binding Source={StaticResource VisibilityTypes}}" SelectedItem="{Binding Visibility}">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Converter={StaticResource enumConverter}}"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>

                                <Separator/>
                                <TextBlock Text="Статический"/>
                                <CheckBox IsChecked="{Binding IsStatic}"/>

                                <TextBlock Text="Абстрактный"/>
                                <CheckBox IsChecked="{Binding IsAbstract}"/>
                                <Separator/>

                                <TextBlock Text="Стереотипы"/>
                                <Button Command="{Binding OpenPropertiesCommand}" CommandParameter="{Binding Stereotypes}" Content="..."/>
                                <TextBlock Text="Атрибуты"/>
                                <Button Command="{Binding OpenPropertiesCommand}" CommandParameter="{Binding Attributes}" Content="..."/>
                                <TextBlock Text="Методы"/>
                                <Button Command="{Binding OpenPropertiesCommand}" CommandParameter="{Binding Methods}" Content="..."/>

                            </StackPanel>
                        </DataTemplate>
                    </h:PropertiesTemplateSelector.ClassTemplate>
                    
                    <h:PropertiesTemplateSelector.AttributeTemplate>
                        <DataTemplate>
                            <StackPanel DataContext="{Binding Source={x:Reference Name=PropertiesPanel}, Path=Content}">
                                <TextBlock Text="Имя"/>
                                <TextBox Text="{Binding Name}"/>

                                <TextBlock Text="Тип"/>
                                <TextBox Text="{Binding Type}"/>
                                <Separator/>
                                <TextBlock Text="Видимость"/>
                                <ComboBox ItemsSource="{Binding Source={StaticResource VisibilityTypes}}" SelectedItem="{Binding Visibility}">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Converter={StaticResource enumConverter}}"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>

                                <Separator/>
                                <TextBlock Text="Статический"/>
                                <CheckBox IsChecked="{Binding IsStatic}"/>
                            </StackPanel>
                        </DataTemplate>
                    </h:PropertiesTemplateSelector.AttributeTemplate>

                    <h:PropertiesTemplateSelector.MethodTemplate>
                        <DataTemplate>
                            <StackPanel DataContext="{Binding Source={x:Reference Name=PropertiesPanel}, Path=Content}">
                                <TextBlock Text="Имя"/>
                                <TextBox Text="{Binding Name}"/>

                                <TextBlock Text="Тип"/>
                                <TextBox Text="{Binding Type}"/>
                                <Separator/>
                                <TextBlock Text="Видимость"/>
                                <ComboBox ItemsSource="{Binding Source={StaticResource VisibilityTypes}}" SelectedItem="{Binding Visibility}">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Converter={StaticResource enumConverter}}"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>

                                <Separator/>
                                <TextBlock Text="Статический"/>
                                <CheckBox IsChecked="{Binding IsStatic}"/>
                                <Separator/>
                                <TextBlock Text="Параметры"/>
                                <ItemsControl ItemsSource="{Binding Parameters}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBox Text="{Binding ParameterString}"/>
                                                <Button Grid.Column="1" Command="{Binding Source={x:Reference Name=PropertiesPanel}, Path=Content.RemoveParameterCommand}" CommandParameter="{Binding}">
                                                    <TextBlock Style="{StaticResource RemoveIcon}"/>
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                                <Button Command="{Binding AddParameterCommand}">
                                    <TextBlock Style="{StaticResource AddIcon}"/>
                                </Button>
                            </StackPanel>
                        </DataTemplate>
                    </h:PropertiesTemplateSelector.MethodTemplate>
                </h:PropertiesTemplateSelector>
            </ContentControl.ContentTemplateSelector>
        </ContentControl>
    </ControlTemplate>
</ResourceDictionary>